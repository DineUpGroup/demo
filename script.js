(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){var p,y;"use strict";class c{constructor(e){this.params=e;let t;if(typeof e.element=="string"){if(t=document.getElementById(e.element),!t)throw new Error(`${t} does not exist`)}else t=e.element;this.root_element=t,this.iframe=this.createIFrame(),this.button=this.createButton(),this.modal=this.createModal(),this.root_element.appendChild(this.button),this.root_element.style.display="flex",this.root_element.style.flexDirection="column",this.root_element.style.position="relative",this.root_element.style.alignItems="start"}createIFrame(){const e=document.createElement("iframe");return e.src=`https://development.dineup.com/order/${this.params.client_secret}`,e.height="100%",e.width="100%",e.style.border="none",window.addEventListener("message",t=>{t.origin==="https://development.dineup.com"&&(t.data.line_items&&(this.root_element.removeChild(this.modal),this.params.callback(t.data)),t.data.close&&this.root_element.removeChild(this.modal))}),e}createModal(){const e=document.createElement("div");e.style.zIndex="999",e.style.position="fixed",e.style.backgroundColor="rgb(0 0 0 / 0.8)",e.style.top="0px",e.style.left="0px",e.style.right="0px",e.style.bottom="0px",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.addEventListener("click",()=>{this.root_element.removeChild(this.modal)});const t=document.createElement("div"),o=document.createElement("header");return o.style.width="100%",o.style.display="flex",o.style.color="white",o.style.justifyContent="space-between",window.innerWidth<1e3?(t.style.height="100vh",t.style.width="100vw"):(t.style.borderRadius="0.5rem",t.style.height="85vh",t.style.width="85vw"),t.style.backgroundColor="#0E1622",t.style.overflow="hidden",t.addEventListener("click",i=>{i.stopPropagation()}),t.appendChild(this.iframe),e.appendChild(t),e}createButton(){const e=document.createElement("button");return e.type="button",this.params.button_class?e.classList.add(this.params.button_class):(e.style.padding="0.875rem",e.style.margin="1rem 0",e.style.border="none",e.style.fontSize="0.875rem",e.style.lineHeight="1.25rem",e.style.cursor="pointer",e.style.backgroundColor="#002356",e.style.color="white",e.style.borderRadius="0.5rem",e.style.textAlign="center",e.style.fontFamily="Verdana"),e.textContent="Choose your onboard meal",e.addEventListener("mouseover",()=>{e.style.backgroundColor="#28AAF0"}),e.addEventListener("mouseout",()=>{e.style.backgroundColor="#002356"}),e.addEventListener("click",()=>{this.root_element.appendChild(this.modal)}),e}}if(window.location.href.startsWith("https://www.jetblue.com")){const r=document.getElementsByTagName("jb-shopping-cart-panel")[0],e=document.createElement("div");e.id="dineup-button",r.after(e);const t=document.getElementsByTagName("jb-price-summary-box")[0],o=t.childNodes[0].childNodes[14],i=document.createElement("div");i.className="bb bw1 pr3 b--medium-gray";const h=t.childNodes[0].childNodes[22].childNodes[0].childNodes[1],u=(h.textContent||"").substring(2).trim(),d=parseFloat(u.replace(/,/g,"")),n=document.createElement("div");n.id="dineup-checkout",n.style.padding="0.5rem  0px",n.style.display="flex",n.style.flexDirection="column",n.style.gap="0.5rem",o.after(n),n.after(i),new c({client_secret:"test_embedded",element:"dineup-button",callback:a=>{n.innerHTML="",a.line_items.length===0?(n.style.display="hidden",i.className=""):(n.style.display="flex",i.className="bb bw1 pr3 b--medium-gray"),a.line_items.forEach(l=>{const s=document.createElement("div"),m=document.createElement("div");m.textContent=l.name;const f=document.createElement("div");f.textContent=`$${l.unit_amount}`,s.style.display="flex",s.style.justifyContent="space-between",s.style.fontSize="12px",s.append(m),s.append(f),n.append(s)}),h.textContent=`$${(a.total+d).toFixed(2)}`}})}if(window.location.href.startsWith("https://fly.surfair.com/")){let r=document.getElementsByTagName("h3")[0];const e=(p=r.parentElement)==null?void 0:p.parentElement,t=e.previousElementSibling;r=document.createElement("div"),r.id="dineup-button",t.after(r);const o=e.childNodes[4].cloneNode(),i=e.childNodes[5].childNodes[1],h=(y=i.textContent)==null?void 0:y.substring(1),u=parseFloat(h.replace(/,/g,"")),d=document.createElement("div");e.childNodes[4].after(d),new c({client_secret:"test_embedded",element:"dineup-button",callback:n=>{d.innerHTML="",n.line_items.length===0?(d.style.display="hidden",o.innerHTML=""):(d.style.display="block",d.after(o),o.innerHTML=e.childNodes[2].innerHTML),n.line_items.forEach(a=>{const l=document.createElement("div"),s=document.createElement("div");s.textContent=a.name;const m=document.createElement("div");m.textContent=`$${a.unit_amount}`,l.style.display="flex",l.style.justifyContent="space-between",l.style.paddingTop="0.5rem",l.style.fontSize="14px",l.append(s),l.append(m),d.append(l)}),i.textContent=`$${(n.total+u).toFixed(2)}`}})}});
